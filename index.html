<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado Pro - v3</title>
    <style>
        :root { --primary: #2563eb; --bg: #f1f5f9; --text: #1e293b; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); padding: 20px; display: flex; justify-content: center; }
        
        .card { background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); max-width: 700px; width: 100%; position: relative; }
        
        /* Cronômetro Style */
        .timer-box { position: absolute; top: 20px; right: 20px; background: #fee2e2; color: #b91c1c; padding: 8px 15px; border-radius: 20px; font-weight: bold; font-family: monospace; }
        
        .img-questao { max-width: 100%; height: auto; border-radius: 8px; margin: 15px 0; display: block; }
        
        .opcao { border: 2px solid #e2e8f0; padding: 15px; margin: 12px 0; border-radius: 10px; cursor: pointer; transition: 0.2s; }
        .opcao:hover { background: #f8fafc; border-color: var(--primary); }
        .correta { background: #dcfce7 !important; border-color: #22c55e !important; color: #166534; font-weight: bold; }
        .errada { background: #fee2e2 !important; border-color: #ef4444 !important; color: #991b1b; }
        .hidden { display: none; }
        
        .btn-principal { width: 100%; padding: 15px; border: none; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold; margin-top: 10px; }
        .confirmar { background: var(--primary); color: white; }
        .proxima { background: #10b981; color: white; }
    </style>
</head>
<body>

<div class="card">
    <div id="timer" class="timer-box hidden">00:00</div>

    <div id="tela-categorias">
        <h2 style="text-align: center;">Selecione a Disciplina</h2>
        <div style="display: grid; gap: 10px; margin-top: 20px;">
            <button class="btn-principal confirmar" onclick="iniciar('Português')">Português</button>
            <button class="btn-principal confirmar" onclick="iniciar('Raciocínio Lógico')">Raciocínio Lógico</button>
        </div>
    </div>

    <div id="tela-simulado" class="hidden">
        <div id="estatisticas" style="margin-bottom: 20px; color: #64748b;">Questão <span id="num-atual">1</span></div>
        <h3 id="enunciado"></h3>
        <img id="img-placeholder" class="img-questao hidden" src="" alt="Imagem da questão">
        <div id="alternativas"></div>
        
        <button id="btn-confirmar" class="btn-principal confirmar" onclick="verificar()">Confirmar Resposta</button>
        <button id="btn-proxima" class="btn-principal proxima hidden" onclick="proxima()">Próxima Questão</button>
    </div>
</div>

<script>
    // 1. BANCO DE DADOS COM SUPORTE A IMAGENS
    const bancoQuestoes = [
        { 
            materia: "Português", 
            pergunta: "A palavra 'casa' é um substantivo?", 
            opcoes: ["Sim", "Não"], 
            correta: 0 
        },
        { 
            materia: "Raciocínio Lógico", 
            pergunta: "Observe a sequência lógica na imagem e responda qual é o próximo elemento:", 
            imagem: "https://via.placeholder.com/600x200?text=Imagine+um+grafico+ou+sequencia+aqui", // Link da imagem
            opcoes: ["Triângulo", "Círculo", "Quadrado"], 
            correta: 1 
        }
    ];

    let filtradas = [];
    let atual = 0;
    let selecionado = null;
    let segundos = 0;
    let intervalo;

    function iniciar(cat) {
        filtradas = bancoQuestoes.filter(q => q.materia === cat);
        atual = 0;
        document.getElementById('tela-categorias').classList.add('hidden');
        document.getElementById('tela-simulado').classList.remove('hidden');
        document.getElementById('timer').classList.remove('hidden');
        
        iniciarCronometro();
        carregar();
    }

    function iniciarCronometro() {
        segundos = 0;
        clearInterval(intervalo);
        intervalo = setInterval(() => {
            segundos++;
            const min = Math.floor(segundos / 60).toString().padStart(2, '0');
            const seg = (segundos % 60).toString().padStart(2, '0');
            document.getElementById('timer').innerText = `${min}:${seg}`;
        }, 1000);
    }

    function carregar() {
        const q = filtradas[atual];
        selecionado = null;
        document.getElementById('num-atual').innerText = atual + 1;
        document.getElementById('enunciado').innerText = q.pergunta;
        
        // Trata imagem
        const img = document.getElementById('img-placeholder');
        if(q.imagem) {
            img.src = q.imagem;
            img.classList.remove('hidden');
        } else {
            img.classList.add('hidden');
        }

        const area = document.getElementById('alternativas');
        area.innerHTML = '';
        q.opcoes.forEach((t, i) => {
            const div = document.createElement('div');
            div.className = 'opcao';
            div.innerText = t;
            div.onclick = () => {
                document.querySelectorAll('.opcao').forEach(o => o.style.borderColor = '#e2e8f0');
                div.style.borderColor = '#2563eb';
                selecionado = i;
            };
            area.appendChild(div);
        });

        document.getElementById('btn-confirmar').classList.remove('hidden');
        document.getElementById('btn-proxima').classList.add('hidden');
    }

    function verificar() {
        if(selecionado === null) return alert("Selecione uma opção!");
        const correta = filtradas[atual].correta;
        const divs = document.querySelectorAll('.opcao');
        
        if(selecionado === correta) divs[selecionado].classList.add('correta');
        else {
            divs[selecionado].classList.add('errada');
            divs[correta].classList.add('correta');
        }
        
        document.getElementById('btn-confirmar').classList.add('hidden');
        document.getElementById('btn-proxima').classList.remove('hidden');
    }

    function proxima() {
        atual++;
        if(atual < filtradas.length) carregar();
        else {
            clearInterval(intervalo);
            alert(`Fim do simulado! Tempo total: ${document.getElementById('timer').innerText}`);
            location.reload();
        }
    }
</script>
</body>
</html>
